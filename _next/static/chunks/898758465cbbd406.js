(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98899,e=>{"use strict";class t{dbName;storeName;version;db=null;constructor(e="AETHER_MESH_MEMORY",t="protocol_cache",s=1){this.dbName=e,this.storeName=t,this.version=s}async init(){if(!this.db)return new Promise((e,t)=>{let s=indexedDB.open(this.dbName,this.version);s.onerror=()=>t("Failed to open AETHER Mesh Memory"),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName)}})}async set(e,t){return await this.init(),new Promise((s,r)=>{if(!this.db)return r("DB not initialized");let i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t,e);i.onerror=()=>r(`Failed to save key: ${e}`),i.onsuccess=()=>s()})}async get(e){return await this.init(),new Promise((t,s)=>{if(!this.db)return s("DB not initialized");let r=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);r.onerror=()=>s(`Failed to retrieve key: ${e}`),r.onsuccess=()=>t(r.result||null)})}async getAll(){return await this.init(),new Promise((e,t)=>{if(!this.db)return t("DB not initialized");let s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();s.onerror=()=>t("Failed to retrieve all keys"),s.onsuccess=()=>e(s.result||[])})}async scan(e){return await this.init(),new Promise((t,s)=>{if(!this.db)return s("DB not initialized");let r=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName),i=IDBKeyRange.bound(e,e+"ï¿¿"),o=r.getAll(i);o.onerror=()=>s(`Failed to scan keys with prefix: ${e}`),o.onsuccess=()=>t(o.result||[])})}async delete(e){return await this.init(),new Promise((t,s)=>{if(!this.db)return s("DB not initialized");let r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e);r.onerror=()=>s(`Failed to delete key: ${e}`),r.onsuccess=()=>t()})}}let s=new t;e.s(["IDBAdapter",()=>t,"aetherStorage",0,s])},71840,e=>{"use strict";var t=e.i(5256),s=e.i(84039);function r(){let{mesh:e}=(0,s.useAether)();return(0,t.useEffect)(()=>{"serviceWorker"in navigator&&(navigator.serviceWorker.register("/sw.js").then(e=>console.log("[AETHER] Sovereign Service Worker Registered:",e.scope)).catch(e=>console.error("[AETHER] SW Registration Failed:",e)),navigator.serviceWorker.addEventListener("message",async t=>{if(t.data&&"MESH_ASSET_REQUEST"===t.data.type){let{path:s}=t.data;console.log(`[AETHER] Mesh-Bootstrapping: Peer requesting asset ${s}`);let r=await e.requestAsset(s);r&&t.ports[0]?t.ports[0].postMessage({assetBuffer:r}):t.ports[0]&&t.ports[0].postMessage({error:"ASSET_NOT_FOUND_IN_MESH"})}}))},[e]),null}e.s(["PWARegistry",()=>r])},52225,e=>{e.v(e=>Promise.resolve().then(()=>e(98899)))}]);