(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46966,e=>{"use strict";var t=e.i(52669),a=e.i(5256),s=e.i(84039),i=e.i(79437),r=e.i(29922);class l{mesh=i.mesh;SHARD_SIZE=262144;async shred(e){let t=await r.SovereignCrypto.generateKey(),a=await e.arrayBuffer(),s=Math.ceil(a.byteLength/this.SHARD_SIZE),i=[],l=Math.random().toString(36).substring(7).toUpperCase();for(let e=0;e<s;e++){let s=e*this.SHARD_SIZE,l=Math.min(s+this.SHARD_SIZE,a.byteLength),n=a.slice(s,l),{cipher:o,iv:c}=await r.SovereignCrypto.encryptBuffer(n,t);i.push({index:e,cipher:o,iv:new Uint8Array(c)})}return{manifest:{id:l,name:e.name,type:e.type,size:e.size,shardCount:s,encryptionKey:await r.SovereignCrypto.exportKey(t)},shards:i}}async assemble(e,t){if(!e.encryptionKey)throw Error("Manifest is missing encryption key");let a=await r.SovereignCrypto.importKey(e.encryptionKey),s=Array(e.shardCount);for(let i=0;i<e.shardCount;i++){let l=t.get(i);if(!l)throw Error(`Missing shard ${i} for file ${e.id}`);let n=l.cipher instanceof ArrayBuffer?l.cipher:new Uint8Array(l.cipher).buffer,o=l.iv instanceof Uint8Array?l.iv:new Uint8Array(l.iv);s[i]=await r.SovereignCrypto.decryptBuffer(n,a,o)}return new Blob(s,{type:e.type})}async scatter(e,t){for(let a of(this.mesh.broadcast({type:"FILE_MANIFEST",payload:e},"AETHER_MEDIA"),t)){let t={...a,cipher:Array.from(new Uint8Array(a.cipher)),iv:Array.from(a.iv)};this.mesh.broadcast({type:"FILE_SHARD",fileId:e.id,payload:t},"AETHER_MEDIA")}console.log(`[SHARDING] File scattered across mesh: ${e.name} (${e.shardCount} shards)`)}}let n=new l;var o=e.i(39664),c=e.i(18792),d=e.i(73047),h=e.i(29734),x=e.i(92583);function p({manifest:e}){let{mesh:i}=(0,s.useAether)(),[r,l]=(0,a.useState)(new Map),[p,m]=(0,a.useState)(null),[g,y]=(0,a.useState)(0);return(0,a.useEffect)(()=>(i.onEvent(t=>{if("DATA_RECEIVED"===t.type&&t.data?._aether_namespace==="AETHER_MEDIA"){let a=t.data;if("FILE_SHARD"===a.type&&a.fileId===e.id){let e=a.payload;l(t=>{if(t.has(e.index))return t;let a=new Map(t);return a.set(e.index,e),a})}}}),()=>{}),[i,e.id]),(0,a.useEffect)(()=>{let t=r.size;y(t/e.shardCount*100),t!==e.shardCount||p||(console.log(`[SHARDED_IMAGE] All shards received for ${e.id}. Assembling...`),n.assemble(e,r).then(e=>{m(URL.createObjectURL(e))}).catch(e=>{console.error("[SHARDED_IMAGE] Assembly failed:",e)}))},[r,e,p]),(0,t.jsxs)("div",{className:"relative glass-sentinel cyan-border-glow rounded-lg overflow-hidden w-full h-full min-h-[200px] flex items-center justify-center bg-black/50",children:[(0,t.jsx)(c.AnimatePresence,{mode:"wait",children:p?(0,t.jsx)(o.motion.img,{src:p,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full h-full object-cover",alt:e.name},"image"):(0,t.jsxs)(o.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center gap-4 p-8",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.motion.div,{animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"},className:"relative z-10",children:(0,t.jsx)(d.ShieldCheck,{className:"w-12 h-12 text-cyan-glow opacity-50"})}),(0,t.jsx)(o.motion.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 bg-cyan-glow/10 blur-xl rounded-full"})]}),(0,t.jsxs)("div",{className:"text-center z-20",children:[(0,t.jsx)("h3",{className:"text-silver font-mono text-[10px] tracking-[0.3em] uppercase mb-1 opacity-80",children:"Digital Manifestation"}),(0,t.jsxs)("p",{className:"text-[10px] text-cyan-glow font-mono font-bold tracking-widest",children:[g.toFixed(0),"% RECOVERED"]})]}),(0,t.jsx)("div",{className:"w-48 h-[2px] bg-graphite rounded-full overflow-hidden border border-cyan-glow/5 relative",children:(0,t.jsx)(o.motion.div,{className:"absolute left-0 top-0 h-full bg-cyan-glow shadow-[0_0_15px_rgba(34,211,238,0.8)]",initial:{width:0},animate:{width:`${g}%`},transition:{ease:"easeOut"}})}),(0,t.jsx)("div",{className:"grid grid-cols-10 gap-1 opacity-40",children:Array.from({length:Math.min(e.shardCount,100)}).map((e,a)=>(0,t.jsx)(o.motion.div,{initial:{opacity:.2},animate:{opacity:r.has(a)?1:.2,scale:r.has(a)?1.2:1,backgroundColor:r.has(a)?"var(--cyan-glow)":"rgba(255,255,255,0.1)"},className:"w-1.5 h-1.5 rounded-[1px] bg-silver/10"},a))})]},"placeholder")}),(0,t.jsx)("div",{className:"absolute top-2 left-2 flex gap-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 bg-black/80 backdrop-blur-md px-2 py-1 rounded border border-cyan-glow/20 text-[8px] font-mono text-silver uppercase tracking-wider",children:[(0,t.jsx)(x.Cpu,{className:"w-3 h-3 text-cyan-glow"}),(0,t.jsx)("span",{children:"PARALLEL ASSEMBLY"})]})}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 bg-black/80 backdrop-blur-md px-2 py-1 rounded border border-cyan-glow/20 text-[8px] font-mono text-cyan-glow",children:[(0,t.jsx)(h.HardDrive,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"opacity-50",children:"#"}),(0,t.jsx)("span",{children:e.id})]})})]})}var m=e.i(4292);let g=(0,m.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var y=e.i(45791);let f=(0,m.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);function u(){let{mesh:e}=(0,s.useAether)(),[i,r]=(0,a.useState)([]),[l,x]=(0,a.useState)(!1),m=async e=>{let t=e.target.files?.[0];if(t){x(!0);try{console.log(`[MEDIA] Shredding file: ${t.name}...`);let{manifest:e,shards:a}=await n.shred(t);await n.scatter(e,a),r(t=>[e,...t]),console.log("[MEDIA] Sovereign Scattering Complete.")}catch(e){console.error("[MEDIA] Upload failed:",e)}finally{x(!1)}}};return(0,t.jsxs)("div",{className:"flex flex-col gap-8 p-8 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-cyan-glow/10 rounded border border-cyan-glow/20",children:(0,t.jsx)(f,{className:"w-5 h-5 text-cyan-glow"})}),(0,t.jsx)("h1",{className:"text-3xl font-mono text-white tracking-widest uppercase",children:"Media Sovereignty"})]}),(0,t.jsx)("p",{className:"text-silver/50 font-mono text-sm max-w-2xl",children:"Welcome to the Efficiency Epoch. Files uploaded here are instantly shredded into encrypted shards and scattered across the NANDIX mesh. No central server. Parallel P2P retrieval."})]}),(0,t.jsxs)(o.motion.label,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-sentinel cyan-border-glow p-12 rounded-xl flex flex-col items-center justify-center gap-6 cursor-pointer hover:bg-white/5 transition-all group border-dashed",children:[(0,t.jsx)("input",{type:"file",className:"hidden",onChange:m,accept:"image/*"}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(o.motion.div,{animate:l?{scale:[1,1.2,1],rotate:[0,180,360]}:{},transition:{duration:2,repeat:1/0},children:(0,t.jsx)(g,{className:`w-12 h-12 ${l?"text-cyan-glow":"text-silver/30 group-hover:text-cyan-glow/50"}`})})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-silver font-mono text-sm tracking-widest uppercase mb-1",children:l?"Shredding Content...":"Initialize Transmission"}),(0,t.jsx)("p",{className:"text-silver/40 font-mono text-[10px]",children:"Support for Sharded AES-GCM Binary Fragments"})]}),l&&(0,t.jsx)(o.motion.div,{initial:{width:0},animate:{width:"100%"},className:"w-48 h-[2px] bg-cyan-glow mt-2 shadow-[0_0_10px_cyan]"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsx)(c.AnimatePresence,{children:i.map(e=>(0,t.jsxs)(o.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col gap-4",children:[(0,t.jsx)(p,{manifest:e}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 p-2 bg-black/40 rounded border border-white/5",children:[(0,t.jsx)("span",{className:"text-white font-mono text-[10px] truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-silver/40 font-mono text-[8px] uppercase tracking-tighter",children:[e.shardCount," SHARDS â€¢ ",(e.size/1024).toFixed(0)," KB"]}),(0,t.jsx)(d.ShieldCheck,{className:"w-3 h-3 text-cyan-glow/40"})]})]})]},e.id))}),0===i.length&&!l&&(0,t.jsxs)("div",{className:"col-span-full py-20 flex flex-col items-center justify-center opacity-20 border border-white/5 rounded-xl border-dashed",children:[(0,t.jsx)(h.HardDrive,{className:"w-12 h-12 mb-4"}),(0,t.jsxs)("span",{className:"text-silver font-mono text-xs tracking-[0.2em] uppercase text-center",children:["No Active Mesh Artifacts Detected",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-[10px] opacity-50 mt-1 block",children:"Awaiting First Scattering"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"glass-sentinel p-4 rounded-lg flex items-center gap-4",children:[(0,t.jsx)(y.Zap,{className:"w-5 h-5 text-cyan-glow"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-silver font-mono text-[10px] uppercase tracking-widest",children:"Protocol Delta"}),(0,t.jsx)("p",{className:"text-white font-mono text-xl tracking-tighter",children:"Parallel Retrieval"})]})]}),(0,t.jsxs)("div",{className:"glass-sentinel p-4 rounded-lg flex items-center gap-4 opacity-50",children:[(0,t.jsx)(d.ShieldCheck,{className:"w-5 h-5 text-silver"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-silver font-mono text-[10px] uppercase tracking-widest",children:"Integrity Check"}),(0,t.jsx)("p",{className:"text-white font-mono text-xl tracking-tighter",children:"SHA-256 Verfied"})]})]})]})]})}e.s(["default",()=>u],46966)}]);